<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBI æµ‹è¯• - è¯Šæ–­é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f87171; color: #721c24; }
        .warning { background: #fbbf24; color: #92400e; }
        .info { background: #dbeafe; color: #1f2937; }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .grid-item {
            padding: 15px;
            background: #f9fafb;
            border-radius: 4px;
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Vue åº”ç”¨è¯Šæ–­</h1>

        <div class="grid">
            <div class="grid-item">
                <div class="status">
                    <h3>1. æ£€æŸ¥æµè§ˆå™¨ç¯å¢ƒ</h3>
                    <div id="browser-info"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="status">
                    <h3>2. æ£€æŸ¥å…³é”®ä¾èµ–</h3>
                    <div id="dependencies-info"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="status">
                    <h3>3. æ£€æŸ¥ Vue åº”ç”¨çŠ¶æ€</h3>
                    <div id="vue-status"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="status">
                    <h3>4. æ£€æŸ¥è·¯ç”±çŠ¶æ€</h3>
                    <div id="router-status"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="status">
                    <h3>5. æ£€æŸ¥ Pinia çŠ¶æ€</h3>
                    <div id="pinia-status"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('è¯Šæ–­è„šæœ¬å¼€å§‹æ‰§è¡Œ...');

        // 1. æ£€æŸ¥æµè§ˆå™¨ç¯å¢ƒ
        const browserInfo = {
            userAgent: navigator.userAgent,
            language: navigator.language,
            platform: navigator.platform,
            cookieEnabled: navigator.cookieEnabled,
            localStorage: !!window.localStorage,
            sessionStorage: !!window.sessionStorage
        };

        document.getElementById('browser-info').innerHTML = `
            <strong>ç”¨æˆ·ä»£ç†:</strong> ${browserInfo.userAgent}<br>
            <strong>è¯­è¨€:</strong> ${browserInfo.language}<br>
            <strong>å¹³å°:</strong> ${browserInfo.platform}<br>
            <strong>Cookie:</strong> ${browserInfo.cookieEnabled ? 'å¯ç”¨' : 'ç¦ç”¨'}<br>
            <strong>LocalStorage:</strong> ${browserInfo.localStorage ? 'å¯ç”¨' : 'ä¸å¯ç”¨'}<br>
            <strong>SessionStorage:</strong> ${browserInfo.sessionStorage ? 'å¯ç”¨' : 'ä¸å¯ç”¨'}
        `;

        // 2. æ£€æŸ¥å…³é”®ä¾èµ–
        const dependencies = {
            vue: typeof window.Vue !== 'undefined',
            pinia: typeof window.Pinia !== 'undefined',
            vueRouter: typeof window.VueRouter !== 'undefined',
            createApp: typeof window.createApp !== 'undefined'
        };

        const depsStatus = Object.entries(dependencies).map(([key, value]) => {
            const status = value ? 'success' : 'error';
            const color = value ? '#155724' : '#dc2626';
            return `<span style="color: ${color}">${key}: ${status}</span>`;
        }).join('<br>');

        document.getElementById('dependencies-info').innerHTML = depsStatus.join('<br>');

        // 3. æ£€æŸ¥ Vue åº”ç”¨çŠ¶æ€
        const vueStatus = {
            loaded: typeof window.Vue !== 'undefined',
            version: window.Vue ? window.Vue.version || 'æœªçŸ¥' : 'æœªåŠ è½½',
            devtools: window.__VUE_DEVTOOLS_GLOBAL_HOOK__ ? 'å·²å®‰è£…' : 'æœªå®‰è£…'
        };

        const vueStatusHtml = `
            <strong>Vue çŠ¶æ€:</strong><br>
            å·²åŠ è½½: <span style="color: ${vueStatus.loaded ? '#155724' : '#dc2626'}">${vueStatus.loaded ? 'âœ…' : 'âŒ'}</span><br>
            ç‰ˆæœ¬: <span style="color: #666">${vueStatus.version}</span><br>
            å¼€å‘å·¥å…·: <span style="color: #666">${vueStatus.devtools ? 'âœ…' : 'âŒ'}</span>
        `;

        document.getElementById('vue-status').innerHTML = vueStatusHtml;

        // 4. æ£€æŸ¥è·¯ç”±çŠ¶æ€
        const routerStatus = {
            available: typeof window.VueRouter !== 'undefined',
            currentRoute: window.location.pathname,
            routeCount: window.__VUE_ROUTER_GLOBAL_HOOK__ ? window.__VUE_ROUTER_GLOBAL_HOOK__.routes?.length || 'æœªçŸ¥' : 'æœªçŸ¥'
        };

        const routerStatusHtml = `
            <strong>è·¯ç”±çŠ¶æ€:</strong><br>
            VueRouter: <span style="color: #666">${routerStatus.available ? 'âœ…' : 'âŒ'}</span><br>
            å½“å‰è·¯å¾„: <span style="color: #666">${routerStatus.currentRoute}</span><br>
            è·¯ç”±æ•°é‡: <span style="color: #666">${routerStatus.routeCount}</span>
        `;

        document.getElementById('router-status').innerHTML = routerStatusHtml;

        // 5. æ£€æŸ¥ Pinia çŠ¶æ€
        const piniaStatus = {
            available: typeof window.Pinia !== 'undefined',
            version: window.Pinia ? window.Pinia.version || 'æœªçŸ¥' : 'æœªåŠ è½½',
            stores: typeof window.__VUE_PINIA_GLOBAL_HOOK__ !== 'undefined'
        };

        const piniaStatusHtml = `
            <strong>Pinia çŠ¶æ€:</strong><br>
            å·²åŠ è½½: <span style="color: #666">${piniaStatus.available ? 'âœ…' : 'âŒ'}</span><br>
            ç‰ˆæœ¬: <span style="color: #666">${piniaStatus.version}</span><br>
            çŠ¶æ€ç®¡ç†: <span style="color: #666">${piniaStatus.stores ? 'âœ…' : 'âŒ'}</span>
        `;

        document.getElementById('pinia-status').innerHTML = piniaStatusHtml;

        console.log('è¯Šæ–­å®Œæˆ');

        // æµ‹è¯•ç›´æ¥è®¿é—®
        window.testDirectAccess = function() {
            console.log('å°è¯•ç›´æ¥è®¿é—®ç­”é¢˜é¡µé¢...');
            window.location.href = '/questionnaire';
        };

        // æµ‹è¯• Vue åº”ç”¨åˆ›å»º
        window.testAppCreation = function() {
            console.log('å°è¯•åˆ›å»ºç®€å•çš„ Vue åº”ç”¨...');
            try {
                const { createApp } = window.Vue;
                const app = createApp({
                    data() {
                        return {
                            message: 'Hello from Simple Vue App!'
                        }
                    },
                    template: '<div style="padding: 20px;"><h1>{{ message }}</h1></div>'
                });

                app.mount('#test-app');
                console.log('âœ… ç®€å• Vue åº”ç”¨åˆ›å»ºæˆåŠŸ');

            } catch (error) {
                console.error('âŒ Vue åº”ç”¨åˆ›å»ºå¤±è´¥:', error);
            }
        };

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            console.log('DOM åŠ è½½å®Œæˆï¼Œå¼€å§‹è¯Šæ–­...');

            // å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰åº“éƒ½åŠ è½½å®Œæˆ
            setTimeout(() => {
                const browserDiv = document.getElementById('browser-info');
                const depsDiv = document.getElementById('dependencies-info');
                const vueDiv = document.getElementById('vue-status');
                const routerDiv = document.getElementById('router-status');
                const piniaDiv = document.getElementById('pinia-status');

                if (browserDiv && depsDiv && vueDiv && routerDiv && piniaDiv) {
                    console.log('æ‰€æœ‰è¯Šæ–­å…ƒç´ éƒ½å·²æ‰¾åˆ°');
                } else {
                    console.error('âŒ æŸäº›è¯Šæ–­å…ƒç´ æœªæ‰¾åˆ°');
                }
            }, 100);
        });
    </script>
</body>
</html>